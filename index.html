<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>GACOR EXPRESS</title>

<!-- Bootstrap -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

<!-- Leaflet -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

<meta name="theme-color" content="#1abc9c">

<style>
body{background:#f4f6f9;padding-bottom:75px}
.banner img{max-width:100%;border-radius:12px}
.menu-card{cursor:pointer}
.bottom-nav{
 position:fixed;bottom:0;left:0;right:0;
 background:#fff;border-top:1px solid #ddd;
}
.bottom-nav a{font-size:12px;color:#555}
.bottom-nav i{font-size:22px}
#map{height:260px;border-radius:12px}
</style>
</head>

<body>

<div class="container mt-3">
<h4 class="text-center fw-bold">GACOR EXPRESS</h4>
<p class="text-center text-muted">Layanan Antar Jemput & Makanan</p>

<!-- Banner -->
<div class="text-center mb-3 banner">
<img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEijvQWrMotbzVppCxgv1YTqOcGuT3ZM4QrhljQ5TqxCKjYiu8bHlzNvySFMT5hoeol8EPnIp2EMGnwZa5YIMORbyeC5H3YoO0_2RFXYbetZQL-zIfPcpC-l4fMvD_e5KJT9Qc2F_k01Tv9mX12j1Km96Ll3oYH5CrhfGwbymFb3dkH_63ED_T3A1DUnK3s/s320/IMG_20260117_100108.jpg">
</div>

<!-- Menu -->
<div class="row g-3 text-center">
<div class="col-4">
<div class="card menu-card" onclick="openOrder('Ojek Online')">
<div class="card-body">
<i class="bi bi-bicycle text-success"></i>
<p>Ojek</p>
</div>
</div>
</div>

<div class="col-4">
<div class="card menu-card" onclick="openOrder('Food Delivery')">
<div class="card-body">
<i class="bi bi-bag-heart text-danger"></i>
<p>Food</p>
</div>
</div>
</div>

<div class="col-4">
<div class="card menu-card" onclick="openOrder('Jastip')">
<div class="card-body">
<i class="bi bi-box-seam text-primary"></i>
<p>Jastip</p>
</div>
</div>
</div>
</div>
</div>

<!-- Modal -->
<div class="modal fade" id="orderModal">
<div class="modal-dialog modal-lg">
<div class="modal-content">
<div class="modal-header">
<h5>Form Pemesanan</h5>
<button class="btn-close" data-bs-dismiss="modal"></button>
</div>

<div class="modal-body">
<input id="nama" class="form-control mb-2" placeholder="Nama Pemesan">
<input id="layanan" class="form-control mb-2" readonly>

<button class="btn btn-outline-success w-100 mb-2" onclick="getLocation()">
üìç Ambil Lokasi Jemput
</button>

<small class="text-muted">Klik peta untuk menentukan titik antar</small>
<div id="map" class="my-2"></div>

<p class="fw-bold">Tarif: Rp <span id="tarif">0</span></p>

<button class="btn btn-success w-100" onclick="sendWA()">Kirim Pesanan</button>
</div>
</div>
</div>
</div>

<!-- Bottom Nav -->
<div class="bottom-nav d-flex justify-content-around py-2 text-center">
<a href="#"><i class="bi bi-house"></i><br>Home</a>
<a href="https://wa.me/6282154306353"><i class="bi bi-question-circle"></i><br>Tanya</a>
<a href="https://wa.me/6282154306353"><i class="bi bi-chat-dots"></i><br>Admin</a>
</div>

<!-- JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
let map, jemputMarker, antarMarker, line;
let jemputLatLng, antarLatLng;

function openOrder(service){
 document.getElementById('layanan').value = service;
 new bootstrap.Modal(orderModal).show();
}

function getLocation(){
 navigator.geolocation.getCurrentPosition(pos=>{
   jemputLatLng=[pos.coords.latitude,pos.coords.longitude];

   map=L.map('map').setView(jemputLatLng,15);
   L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

   jemputMarker=L.marker(jemputLatLng).addTo(map).bindPopup("üìç Jemput").openPopup();

   map.on('click',e=>{
     setAntar(e.latlng);
   });
 });
}

function setAntar(latlng){
 antarLatLng=[latlng.lat,latlng.lng];

 if(antarMarker) map.removeLayer(antarMarker);
 if(line) map.removeLayer(line);

 antarMarker=L.marker(antarLatLng).addTo(map).bindPopup("üìç Antar").openPopup();
 line=L.polyline([jemputLatLng,antarLatLng]).addTo(map);

 hitungTarif();
}

function hitungTarif(){
 let jarak=map.distance(jemputLatLng,antarLatLng)/1000;
 let tarif=9000;

 if(jarak>1){
   let extra=(jarak-1)*1000;
   extra=extra<500?1000:Math.round(extra/1000)*1000;
   tarif+=extra;
 }
 document.getElementById("tarif").innerText=tarif.toLocaleString();
}

function sendWA(){
 let nama=nama.value;
 let layanan=layanan.value;
 let tarif=document.getElementById("tarif").innerText;

 let jemput=`https://www.openstreetmap.org/?mlat=${jemputLatLng[0]}&mlon=${jemputLatLng[1]}`;
 let antar=`https://www.openstreetmap.org/?mlat=${antarLatLng[0]}&mlon=${antarLatLng[1]}`;

 let text=`Pesanan GACOR EXPRESS
Nama: ${nama}
Layanan: ${layanan}
Tarif: Rp ${tarif}
Maps Jemput: ${jemput}
Maps Antar: ${antar}`;

 window.open(`https://wa.me/6282154306353?text=${encodeURIComponent(text)}`);
}
</script>

</body>
 </html>
