<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>GACOR EXPRESS</title>

<!-- Bootstrap 5 -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Leaflet -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

<!-- Icons -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

<style>
body{
    background:#f5f7fa;
    padding-bottom:80px;
}
.header{
    background:linear-gradient(135deg,#1e90ff,#2ecc71);
    color:#fff;
    padding:15px;
    border-radius:0 0 20px 20px;
}
.service-card{
    border-radius:15px;
    text-align:center;
    padding:15px;
    background:#fff;
    box-shadow:0 4px 10px rgba(0,0,0,.1);
    cursor:pointer;
}
.service-card i{
    font-size:30px;
    color:#2ecc71;
}
#map{
    height:300px;
    border-radius:10px;
}
.bottom-nav{
    position:fixed;
    bottom:0;
    left:0;
    right:0;
    background:#fff;
    border-top:1px solid #ddd;
}
.bottom-nav a{
    text-decoration:none;
    color:#555;
    font-size:13px;
}
.bottom-nav i{
    font-size:20px;
}
</style>
</head>
<body>

<!-- HEADER -->
<div class="header text-center">
    <h4 class="fw-bold">GACOR EXPRESS</h4>
    <p class="mb-1">Layanan Antar Jemput & Delivery</p>
</div>

<!-- BANNER -->
<div class="container mt-3">
    <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEijvQWrMotbzVppCxgv1YTqOcGuT3ZM4QrhljQ5TqxCKjYiu8bHlzNvySFMT5hoeol8EPnIp2EMGnwZa5YIMORbyeC5H3YoO0_2RFXYbetZQL-zIfPcpC-l4fMvD_e5KJT9Qc2F_k01Tv9mX12j1Km96Ll3oYH5CrhfGwbymFb3dkH_63ED_T3A1DUnK3s/s320/IMG_20260117_100108.jpg" 
    class="img-fluid rounded">
</div>

<!-- SERVICES -->
<div class="container mt-4">
<div class="row g-3">
    <div class="col-4">
        <div class="service-card" onclick="openOrder('Ojek Online')">
            <i class="bi bi-bicycle"></i>
            <p class="mt-2 mb-0">Ojek Online</p>
        </div>
    </div>
    <div class="col-4">
        <div class="service-card" onclick="openOrder('Food Delivery')">
            <i class="bi bi-bag-heart"></i>
            <p class="mt-2 mb-0">Food Delivery</p>
        </div>
    </div>
    <div class="col-4">
        <div class="service-card" onclick="openOrder('Jastip')">
            <i class="bi bi-box-seam"></i>
            <p class="mt-2 mb-0">Jastip</p>
        </div>
    </div>
</div>
</div>

<!-- MODAL ORDER -->
<div class="modal fade" id="orderModal" tabindex="-1">
<div class="modal-dialog modal-lg modal-dialog-centered">
<div class="modal-content">
<div class="modal-header">
    <h5 class="modal-title">Form Pemesanan</h5>
    <button class="btn-close" data-bs-dismiss="modal"></button>
</div>
<div class="modal-body">

<input type="text" id="nama" class="form-control mb-2" placeholder="Nama Pemesan">
<input type="text" id="layanan" class="form-control mb-2" readonly>

<button class="btn btn-success w-100 mb-2" onclick="getLocation()">üìç Ambil Lokasi Jemput</button>
<input type="text" id="jemput" class="form-control mb-2" placeholder="Titik Jemput" readonly>

<input type="text" id="antar" class="form-control mb-2" placeholder="Titik Antar (klik peta)">

<div id="map"></div>

<div class="alert alert-info mt-2">
    Tarif: <strong id="tarif">Rp 0</strong>
</div>

<button class="btn btn-primary w-100" onclick="kirimWA()">Kirim Pesanan</button>

</div>
</div>
</div>
</div>

<!-- BOTTOM NAV -->
<div class="bottom-nav">
<div class="container">
<div class="row text-center py-2">
    <div class="col">
        <a href="#"><i class="bi bi-house"></i><br>Home</a>
    </div>
    <div class="col">
        <a href="#"><i class="bi bi-clock-history"></i><br>Proses</a>
    </div>
    <div class="col">
        <a href="https://wa.me/6282154306353"><i class="bi bi-chat-dots"></i><br>Tanya Admin</a>
    </div>
</div>
</div>
</div>

<!-- JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
let map, jemputMarker, antarMarker, jemputLatLng, antarLatLng;

function openOrder(layanan){
    document.getElementById('layanan').value = layanan;
    new bootstrap.Modal(document.getElementById('orderModal')).show();
    setTimeout(initMap,300);
}

function initMap(){
    if(map) return;
    map = L.map('map').setView([-7.9,112.6],13);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

    map.on('click', function(e){
        antarLatLng = e.latlng;
        if(antarMarker) map.removeLayer(antarMarker);
        antarMarker = L.marker(antarLatLng).addTo(map).bindPopup("Titik Antar").openPopup();
        document.getElementById('antar').value = antarLatLng.lat + "," + antarLatLng.lng;
        hitungTarif();
    });
}

function getLocation(){
    navigator.geolocation.getCurrentPosition(pos=>{
        jemputLatLng = {lat:pos.coords.latitude, lng:pos.coords.longitude};
        document.getElementById('jemput').value = jemputLatLng.lat + "," + jemputLatLng.lng;
        map.setView(jemputLatLng,15);
        if(jemputMarker) map.removeLayer(jemputMarker);
        jemputMarker = L.marker(jemputLatLng).addTo(map).bindPopup("Titik Jemput").openPopup();
    });
}

function hitungTarif(){
    if(!jemputLatLng || !antarLatLng) return;
    let d = map.distance(jemputLatLng, antarLatLng) / 1000;
    let tarif = 9000;
    if(d > 1){
        let tambahan = (d - 1) * 1000;
        tarif += Math.round(tambahan/1000)*1000;
    }
    document.getElementById('tarif').innerText = "Rp " + tarif.toLocaleString();
}

function kirimWA(){
    let text = `PESANAN GACOR EXPRESS
Nama: ${nama.value}
Layanan: ${layanan.value}
Jemput: ${jemput.value}
Antar: ${antar.value}
Tarif: ${tarif.innerText}`;
    window.open("https://wa.me/6282154306353?text="+encodeURIComponent(text));
}
</script>

</body>
</html>
